System.register("chunks:///_virtual/AudioDataItem.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"37e3eLEpLtFYaH8mPIcIS+w","AudioDataItem",void 0);t("AudioDataItem",(function(){this.key=null,this.path=null,this.refId=null}));e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioDataLoader.ts",["cc"],(function(o){var t;return{setters:[function(o){t=o.cclegacy}],execute:function(){t._RF.push({},"e5747tgDXpNSaSo6gpMUgcV","AudioDataLoader",void 0);o("AudioDataLoader",function(){function o(){this.onComplete=null,this.onError=null}return o.prototype.Load=function(o){for(var t=this,n={},r=0,e=function(){var e=o[u];cc.loader.load(cc.url.raw(e.path),(function(u,a){u||null!=t.onError&&t.onError(u),e.refId=a,n[e.key]=e,++r==o.length&&null!=t.onComplete&&t.onComplete(n)}))},u=0;u<o.length;++u)e()},o}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundMusic.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"f31cdCYnm1Fur2B8KyjoihO","BackgroundMusic",void 0);t("BackgroundMusic",function(){function t(){this.data=null,this.Invalid_Id=-9999,this.id=this.Invalid_Id,this.m_enabled=!0}var n=t.prototype;return n.setEnabled=function(t){this.m_enabled=t,0==t&&this.stop()},n.getEnabled=function(){return this.m_enabled},n.play=function(t,n){},n.stop=function(){},n.getItem=function(t){return null==this.data?null:this.data[t]},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Block.ts",["cc","./ResMgr.ts"],(function(t){var n,e,o,r,i;return{setters:[function(t){n=t.cclegacy,e=t.Vec2,o=t.instantiate,r=t.Sprite},function(t){i=t.ResMgr}],execute:function(){n._RF.push({},"64e2duQVrZL+6kr/chv8td2","Block",void 0);var c=t("Block",(function(){this.id=void 0,this.coord=new e,this.presentation=new s})),s=t("BlockPresentation",(function(){this.root=null,this.spr=null}));t("BlockFactory",function(){function t(){}return t.create=function(t){var n=i.ins.block.get(t),e=new c;e.id=t;var s=o(n);return e.presentation.root=s,e.presentation.spr=s.getComponent(r),e},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CfgLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgShape.ts"],(function(e){var n,t,r,a,u,c;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e.resources},function(e){u=e.CfgShape,c=e.CfgShapeItem}],execute:function(){r._RF.push({},"efaba7Mm9tKyavNlHNDnhDQ","CfgLoader",void 0);e("CfgLoader",function(){function e(){}return e.exe=function(){var e=n(t().mark((function e(n){var r,a,o,s,i,f,p;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadAsync("Cfg/shape");case 2:r=e.sent,a=r.json,o=0;case 5:if(!(o<a.length)){e.next=19;break}if(s=a[o],i=s.Id,""!=(f=s.Shape)){e.next=11;break}return e.abrupt("continue",16);case 11:p=new c,u.data.set(i,p),p.id=i,p.shape=f,p.probabilityWeight=Number(s.Probability);case 16:++o,e.next=5;break;case 19:n();case 20:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),e.loadAsync=function(){var e=n(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){a.load(n,(function(n,t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/CfgShape.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"dcc1bPG9ztA6KL9F4YwDmvP","CfgShape",void 0),t("CfgShape",(function(){})).data=new Map;t("CfgShapeItem",(function(){this.id=void 0,this.shape=void 0,this.probabilityWeight=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/Combo.ts",["cc"],(function(o){var t;return{setters:[function(o){t=o.cclegacy}],execute:function(){t._RF.push({},"651e4GX6jFH5og8DjrsejAp","Combo",void 0);var e=o("ComboJudge",function(){function o(){this.counterMove=-1,this.counterCombo=-1}var t=o.prototype;return t.exeEliminate=function(){this.counterCombo++,this.counterMove=3},t.exeMoveNoEliminate=function(){if(this.counterMove<0)return!1;var o=!1;return this.counterMove--,0==this.counterMove&&(this.counterCombo>=1&&(o=!0),this.counterCombo=-1),o},o}());e.ins=new e,t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Effect.ts",["cc","./ResMgr.ts","./UiMain.ts","./Map.ts"],(function(t){var n,e,o,i,a,r,s,c,l,p;return{setters:[function(t){n=t.cclegacy,e=t.instantiate,o=t.Label,i=t.UITransform,a=t.Animation,r=t.tween,s=t.Vec3},function(t){c=t.ResMgr},function(t){l=t.UiMain},function(t){p=t.Map}],execute:function(){n._RF.push({},"13634UIBT1FOZLMdMbq2NCE","Effect",void 0);t("Effect",function(){function t(){}return t.playCombo=function(t,n){n=n.clone();var s=c.ins.effect.getChildByPath("Combo"),f=e(s);f.getChildByPath("val").getComponent(o).string=t.toString();var u=f.getComponent(i).contentSize.width/2;n.x+u>320?n.x=320-u:n.x-u<-320&&(n.x=-320+u);var d=l.ins.root;f.setParent(d,!1),n=p.ins.presentation.root.getComponent(i).convertToWorldSpaceAR(n),n=d.getComponent(i).convertToNodeSpaceAR(n),f.setParent(d,!1),f.position=n;var g=f.getComponent(a);g.playOnLoad=!0;var v=g.clips[0].duration;return r(this).delay(v).call((function(){f.destroy()})).start(),f},t.playScore=function(t,n,f){var u=c.ins.effect.getChildByPath("Score"),d=e(u);d.getComponent(o).string=t.toString();var g=l.ins.root;if(d.setParent(g,!1),n=p.ins.presentation.root.getComponent(i).convertToWorldSpaceAR(n),n=g.getComponent(i).convertToNodeSpaceAR(n),d.position=n,null!=f){var v=c.ins.effect.getChildByPath("Evaluation/"+f),y=e(v);y.setParent(d,!1),y.position=new s(0,-80)}var C=d.getComponent(a);C.playOnLoad=!0;var m=C.clips[0].duration;return r(this).delay(m).call((function(){d.destroy()})).start(),d},t.playEniminate=function(t){var n=p.ins.presentation.root,o=c.ins.effect.getChildByPath("Eliminate"),i=e(o);i.setParent(n),i.position=t;var s=i.getComponent(a);s.play();var l=s.defaultClip.duration;return r(i).delay(l).call((function(){i.destroy()})).start(),i},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Eliminate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiMain.ts","./Map.ts","./Combo.ts","./EliminateHint.ts","./Scoring.ts","./Player.ts","./Shake.ts","./Sound2.ts","./Effect.ts","./EliminateCalc.ts"],(function(e){var n,t,o,i,a,r,l,c,s,u,f,m,v,d,g,p;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,o=e.tween,i=e.Vec2,a=e.Vec3},function(e){r=e.UiMain},function(e){l=e.Map},function(e){c=e.ComboJudge},function(e){s=e.EliminateHint},function(e){u=e.ScoringRule,f=e.Scoring},function(e){m=e.Player},function(e){v=e.Shake},function(e){d=e.Sound},function(e){g=e.Effect},function(e){p=e.EliminateCalc}],execute:function(){t._RF.push({},"5c76eZg+nhDPbIhX09oExK0","Eliminate",void 0);e("Eliminate",function(){function e(){}return e.exe=function(){s.ins.reset();var e=0,t=new Set,i=new Array,a=new Array;if(p.calc(t,a,i,null),0==t.size)return!1;this.effect(i,a);for(var l,m=this.getPosLast(t),v=i.length+a.length,h=n(t);!(l=h()).done;){var b=l.value;b.block.presentation.root.destroy(),b.block=null}var E=0;c.ins.exeEliminate();var y=c.ins.counterCombo;return y>0?(1==y&&r.ins.comboIndicator.enter(),r.ins.comboIndicator.combo(),g.playCombo(y,m),e=u.getScoreEliminateCombo(y,v),E=1.5,this.shake(y)):e=u.getScoreEliminateNonCombo(v),o(this).delay(E).call((function(){f.add(e);var n=null;2==v?n="Good":3==v?n="Great":4==v?n="Excellect":5==v?n="Amazing":6==v&&(n="Unbelievable"),g.playScore(e,m,n),d.evaluation(v)})).start(),this.sound(y),!0},e.effect=function(e,t){for(var o,r=n(e);!(o=r()).done;){var c=o.value,s=l.ins.getCell(new i(c,0)).pos.x,u=new a(s,0);g.playEniminate(u).eulerAngles=new a(0,0,90)}for(var f,m=n(t);!(f=m()).done;){var v=f.value,d=l.ins.getCell(new i(0,v)).pos.y,p=new a(0,d);g.playEniminate(p)}},e.sound=function(e){if(0!=e){var n=e<7?e:e%7+1;d.combo(n)}else d.elimNormal()},e.shake=function(e){1==e?v.exePreset(l.ins.presentation.root,"1"):(2<=e&&e<=5||6<=e)&&v.exePreset(l.ins.presentation.root,"3",.8)},e.getPosLast=function(e){for(var t,o=new a,i=new Array,r=n(e);!(t=r()).done;){var l=t.value;-1!=m.ins.cellsLast.indexOf(l)&&(i.push(l),o.add(l.pos))}var c=i.length;return o.divide3f(c,c,c),o},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/EliminateCalc.ts",["cc","./Map.ts"],(function(l){var i,n;return{setters:[function(l){i=l.cclegacy},function(l){n=l.Map}],execute:function(){i._RF.push({},"06a587Lu3pHZZmSJNmj6dE+","EliminateCalc",void 0);l("EliminateCalc",function(){function l(){}return l.calc=function(l,i,n,c){void 0===i&&(i=null),void 0===n&&(n=null),void 0===c&&(c=null),l.clear(),this.calcRows(l,i,c),this.calcCols(l,n,c)},l.calcRows=function(l,i,c){void 0===i&&(i=null),void 0===c&&(c=null);for(var u=n.ins,a=0;a<u.size.height;++a){for(var o=!0,r=0;r<u.size.width;++r){var t=u.grid[a][r];if((null==c||-1==c.indexOf(t))&&null==t.block){o=!1;break}}if(0!=o&&(null!=i&&i.push(a),null!=l))for(var e=0;e<u.size.width;++e){var s=u.grid[a][e];null!=s.block&&l.add(s)}}},l.calcCols=function(l,i,c){void 0===i&&(i=null),void 0===c&&(c=null);for(var u=n.ins,a=0;a<u.size.width;++a){for(var o=!0,r=0;r<u.size.height;++r){var t=u.grid[r][a];if((null==c||-1==c.indexOf(t))&&null==t.block){o=!1;break}}if(0!=o){null!=i&&i.push(a);for(var e=0;e<u.size.height;++e){var s=u.grid[e][a];null!=s.block&&l.add(s)}}}},l}());i._RF.pop()}}}));

System.register("chunks:///_virtual/EliminateHint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EliminateCalc.ts"],(function(t){var e,n,r;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},function(t){r=t.EliminateCalc}],execute:function(){n._RF.push({},"bff86ndTVJIe4VW8lvNSMvQ","EliminateHint",void 0);var o=t("EliminateHint",function(){function t(){this.last=new Set,this.current=new Set}var n=t.prototype;return n.exe=function(t){r.calc(this.current,null,null,t),this.reset();for(var n,o=e(this.current);!(n=o()).done;){var i=n.value.block.presentation.spr,l=i.color.clone();l.a=150,i.color=l}for(var a,c=e(this.current);!(a=c()).done;){var s=a.value;this.last.add(s)}},n.reset=function(){for(var t,n=e(this.last);!(t=n()).done;){var r=t.value.block.presentation.spr,o=r.color.clone();o.a=255,r.color=o}this.last.clear()},t}());o.ins=new o,n._RF.pop()}}}));

System.register("chunks:///_virtual/Entry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Init.ts"],(function(t){var n,r,e,o,c;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,o=t.Component},function(t){c=t.Init}],execute:function(){var i;r._RF.push({},"1c814lixZ9N27AFoJmdRZ7A","Entry",void 0);var u=e.ccclass;e.property,t("Entry",u("Entry")(i=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var e=r.prototype;return e.start=function(){console.log("Entry.exe"),c.exe()},e.update=function(t){},r}(o))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/GameStart.ts",["cc","./UiMain.ts","./UiTouch.ts","./Map.ts","./Player.ts","./Sound2.ts","./Tray.ts"],(function(n){var t,i,o,r,e,c,s;return{setters:[function(n){t=n.cclegacy},function(n){i=n.UiMain},function(n){o=n.UiTouch},function(n){r=n.Map},function(n){e=n.Player},function(n){c=n.Sound},function(n){s=n.Tray}],execute:function(){t._RF.push({},"c3a4dvUOn1A3YAw6EcbBzg7","GameStart",void 0);n("GameStart",function(){function n(){}return n.exe=function(){for(var n=r.ins,t=0;t<n.size.height;++t)for(var a=0;a<n.size.width;++a){var u=n.grid[t][a],f=u.block;null!=f&&(f.presentation.root.destroy(),u.block=null)}e.ins.score=0,i.ins.score.string="0",s.ins.clear(),s.ins.gen(),o.ins.root.active=!0,i.ins.comboIndicator.reset(),c.gameStart()},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Guide.ts",["cc","./Block.ts","./Map.ts","./Tray.ts","./UiMain.ts","./ResMgr.ts","./UiTouch.ts","./EliminateHint.ts"],(function(n){var t,e,o,i,s,a,r,c,l,u,h,p,f,d,v;return{setters:[function(n){t=n.cclegacy,e=n.sys,o=n.Input,i=n.Vec2,s=n.tween,a=n.Vec3,r=n.UITransform,c=n.instantiate},function(n){l=n.BlockFactory},function(n){u=n.Map},function(n){h=n.Tray},function(n){p=n.UiMain},function(n){f=n.ResMgr},function(n){d=n.UiTouch},function(n){v=n.EliminateHint}],execute:function(){t._RF.push({},"2bd1fx4nXhG3LhINLnFb9lv","Guide",void 0);var g=n("Guide",function(){function n(){}return n.loadFlag=function(){var n=e.localStorage.getItem("Guide");return null!=n&&""!=n&&"1"==n},n.saveFlag=function(){e.localStorage.setItem("Guide","1")},n.exe=function(n){1!=this.loadFlag()?(this.init(),this.onComplete=n,this.step1()):n()},n.init=function(){d.ins.root.on(o.EventType.TOUCH_START,this.onTouchStart,this),d.ins.root.on(o.EventType.TOUCH_END,this.onTouchEnd,this),d.ins.root.on(o.EventType.TOUCH_CANCEL,this.onTouchEnd,this),h.ins.genEnabled=!1,p.ins.btnSettings.active=!1},n.end=function(){d.ins.root.off(o.EventType.TOUCH_START,this.onTouchStart,this),d.ins.root.off(o.EventType.TOUCH_END,this.onTouchEnd,this),d.ins.root.off(o.EventType.TOUCH_CANCEL,this.onTouchEnd,this),d.ins.allowPlace=null,h.ins.genEnabled=!0,h.ins.clear(),p.ins.btnSettings.active=!0,this.saveFlag()},n.step1=function(){var n=this;T.exe("00011100\n00022200\n00033300\n00044400\n00000000\n00055500\n00011100\n00022200"),h.ins.genShapeOne("7","4",1),this.playFiger(u.ins.getCell(new i(4,3)).pos,"1"),d.ins.allowPlace=function(t){v.ins.reset();var e=t[0];return 0!=(3==e.coord.x&&3==e.coord.y)&&(n.anim.destroy(),n.anim=null,s(n).delay(1).call((function(){n.step2()})).start(),!0)}},n.step2=function(){var n=this;T.exe("00000000\n00000000\n12034512\n12034512\n12034512\n00000000\n00000000\n00000000"),h.ins.genShapeOne("3","4",1),this.playFiger(u.ins.getCell(new i(2,4)).pos,"2"),d.ins.allowPlace=function(t){v.ins.reset();var e=t[0];return 0!=(2==e.coord.x&&5==e.coord.y)&&(n.anim.destroy(),n.anim=null,s(n).delay(2).call((function(){n.step3()})).start(),!0)}},n.step3=function(){var n=this;T.exe("00011000\n00011000\n00022000\n11200311\n11200311\n00022000\n00011000\n00011000"),h.ins.genShapeOne("38","5",1),this.playFiger(a.ZERO,"3"),d.ins.allowPlace=function(t){v.ins.reset();var e=t[0];return 0!=(3==e.coord.x&&4==e.coord.y)&&(n.anim.destroy(),n.anim=null,s(n).delay(2).call((function(){n.end(),n.onComplete()})).start(),!0)}},n.playFiger=function(n,t){var e=h.ins.root.children[1].getComponent(r).convertToWorldSpaceAR(a.ZERO);e=p.ins.root.getComponent(r).convertToNodeSpaceAR(e),n=u.ins.presentation.root.getComponent(r).convertToWorldSpaceAR(n),n=p.ins.root.getComponent(r).convertToNodeSpaceAR(n);var o=f.ins.guide.getChildByPath(t),i=c(o);i.setParent(p.ins.root,!1),i.position=e;var l=s(i).call((function(){i.position=e})).to(1,{position:n}).delay(.5);s(i).repeatForever(l).start(),this.anim=i},n.onTouchStart=function(){null!=this.anim&&(this.anim.active=!1)},n.onTouchEnd=function(){null!=this.anim&&(this.anim.active=!0)},n}());g.onComplete=null,g.anim=null;var T=n("MapSet",function(){function n(){}return n.exe=function(n){for(var t=u.ins,e=n.split("\n"),o=0;o<e.length;++o)for(var s=e[o],a=0;a<s.length;++a){var r=s.charAt(a);if("0"!=r){var c=new i(a,e.length-o-1),h=l.create(r),p=t.getCell(c);h.presentation.root.setParent(t.presentation.root),h.presentation.root.position=p.pos,p.block=h}}},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Init.ts",["cc","./UiMain.ts","./UiTouch.ts","./GameStart.ts","./Tray.ts","./Map.ts","./MapDraw.ts","./MapInit.ts","./Player.ts","./ResMgr.ts","./Sound2.ts","./CfgLoader.ts","./Guide.ts","./Test.ts"],(function(n){var t,i,e,s,o,u,c,a,r,f,M,d,p,x,g;return{setters:[function(n){t=n.cclegacy},function(n){i=n.UiMain},function(n){e=n.UiTouch},function(n){s=n.GameStart},function(n){o=n.Tray},function(n){u=n.Map},function(n){c=n.MapDraw},function(n){a=n.MapInit},function(n){r=n.Player,f=n.PlayerPersist},function(n){M=n.ResMgrInit},function(n){d=n.AudioSettingsPersist},function(n){p=n.CfgLoader},function(n){x=n.Guide},function(n){g=n.Test}],execute:function(){t._RF.push({},"ca1fbQMi+xJd5RIqxBQU/Ph","Init",void 0);n("Init",function(){function n(){}return n.exe=function(){var n=this;d.load(),r.ins=new r,f.loadScoreBest(),e.ins=new e,e.ins.init(),i.ins=new i,i.ins.init(),p.exe((function(){M.exe(n.onCompleteResMgrInit.bind(n))}))},n.onCompleteResMgrInit=function(){var n=u.ins=new u;a.exe(n),c.exe(n),o.ins=new o,o.ins.init(),x.exe((function(){s.exe()})),g.exe()},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Judge.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Map.ts","./Tray.ts"],(function(e){var n,r,u,t,l;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,u=e.Vec2},function(e){t=e.Map},function(e){l=e.Tray}],execute:function(){r._RF.push({},"3f8afV90PxEGqpvF8euJazK","Judge",void 0);e("Judage",function(){function e(){}return e.isLose=function(){if(1==l.ins.isEmpty())return!1;for(var e=t.ins,r=0;r<e.size.height;++r)for(var o=0;o<e.size.width;++o)for(var i,s=n(l.ins.shapes);!(i=s()).done;){var a=i.value;if(null!=a)if(null!=this.getCells(a,new u(o,r)))return!1}return!0},e.getCells=function(e,r){for(var u,l=null,o=t.ins,i=n(e.blocks);!(u=i()).done;){var s=u.value.coord.clone().add(r),a=o.getCell(s);if(null==a||null!=a.block)return null;null==l&&(l=new Array),l.push(a)}return l},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Lose.ts",["cc","./UiLose.ts","./UiSettle.ts","./Sound2.ts","./UiTouch.ts"],(function(t){var e,o,n,c,i,s;return{setters:[function(t){e=t.cclegacy,o=t.tween},function(t){n=t.UiLose},function(t){c=t.UiSettle},function(t){i=t.Sound},function(t){s=t.UiTouch}],execute:function(){e._RF.push({},"bd8c3sEkJhIGqkJyiheyx6Q","Lose",void 0);t("Lose",function(){function t(){}return t.exe=function(){console.log("输"),s.ins.root.active=!1,i.lose();var t=n.create();o(this).delay(2).call((function(){t.root.destroy(),c.create()})).start()},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./CfgLoader.ts","./CfgShape.ts","./Entry.ts","./Guide.ts","./Init.ts","./Test.ts","./TriggerAnim.ts","./UiComboIndicator.ts","./UiMain.ts","./UiTouch.ts","./UiLose.ts","./UiSettings.ts","./UiSettle.ts","./Combo.ts","./Eliminate.ts","./EliminateCalc.ts","./EliminateHint.ts","./GameStart.ts","./Judge.ts","./Lose.ts","./MapCellHint.ts","./Place.ts","./Scoring.ts","./Tray.ts","./Block.ts","./Shape.ts","./Map.ts","./MapDraw.ts","./MapHelper.ts","./MapInit.ts","./Effect.ts","./Player.ts","./ResMgr.ts","./Sound2.ts","./BackgroundMusic.ts","./AudioDataItem.ts","./AudioDataLoader.ts","./Sound.ts","./NumberRolling.ts","./Shake.ts","./UiEffect.ts","./Random.ts","./WeightProbability.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Map.ts",["cc"],(function(t){var i,n;return{setters:[function(t){i=t.cclegacy,n=t.Size}],execute:function(){i._RF.push({},"d2975VIsc1Nxq+GK0Uild8i","Map",void 0),t("Map",function(){function t(){this.grid=new Array,this.size=new n,this.presentation=new e}return t.prototype.getCell=function(t){return t.x<0||t.y<0||t.x>=this.size.width||t.y>=this.size.height?null:this.grid[t.y][t.x]},t}()).ins=null;var e=t("MapPresentation",(function(){this.root=void 0}));t("MapCell",(function(){this.block=null,this.coord=null,this.pos=null}));i._RF.pop()}}}));

System.register("chunks:///_virtual/MapCellHint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Map.ts","./ResMgr.ts"],(function(t){var n,i,e,s,r;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,e=t.instantiate},function(t){s=t.Map},function(t){r=t.ResMgr}],execute:function(){i._RF.push({},"8325aGJtcxH4am4aOnaxKvA","MapCellHint",void 0);var o=t("MapCellHint",function(){function t(){this.hintList=new Array}var i=t.prototype;return i.show=function(t){this.hide(),this.gen(t.length);for(var n=0;n<t.length;++n){var i=t[n],e=this.hintList[n];e.active=!0,e.setParent(s.ins.presentation.root,!1),e.position=i.pos}},i.gen=function(t){for(var n=t-this.hintList.length,i=0;i<n;++i){var s=e(r.ins.mapCellHint);this.hintList.push(s)}},i.hide=function(){for(var t,i=n(this.hintList);!(t=i()).done;){t.value.active=!1}},t}());o.ins=new o,i._RF.pop()}}}));

System.register("chunks:///_virtual/MapDraw.ts",["cc","./ResMgr.ts"],(function(t){var e,n,i,r,a,s;return{setters:[function(t){e=t.cclegacy,n=t.Size,i=t.instantiate,r=t.Vec3,a=t.UITransform},function(t){s=t.ResMgr}],execute:function(){e._RF.push({},"c8a91fvtXxCFZOns6APBzCl","MapDraw",void 0);t("MapDraw",function(){function t(){}return t.exe=function(t){this.drawCells(t,80),this.drawMapBg(t,80)},t.drawMapBg=function(t,e){var o=new n;o.width=t.size.width*e+660-640,o.height=t.size.height*e+660-640;var c=i(s.ins.mapBg);c.setParent(t.presentation.root,!1),c.position=r.ZERO,c.setSiblingIndex(0),c.getComponent(a).setContentSize(o)},t.drawCells=function(t,e){var n=t.size.width*e/2-e/2;n*=-1;var a=t.size.height*e/2-e/2;a*=-1;for(var o=0;o<t.size.height;++o)for(var c=0;c<t.size.width;++c){var h=new r;h.x=n+c*e,h.y=a+o*e;var p=i(s.ins.mapCellBg);p.setParent(t.presentation.root,!1),p.position=h,p.name=c+","+o,t.grid[o][c].pos=h}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/MapHelper.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"8c614Pmha9PGJdKRaYch9Ff","MapHelper",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/MapInit.ts",["cc","./Map.ts"],(function(n){var e,t,r,i,a;return{setters:[function(n){e=n.cclegacy,t=n.find,r=n.Size,i=n.Vec2},function(n){a=n.MapCell}],execute:function(){e._RF.push({},"84b083OqsRFX5wP6IqWFi5F","MapInit",void 0);n("MapInit",function(){function n(){}return n.exe=function(n){n.presentation.root=t("Canvas/World/Map");n.size=new r(8,8);for(var e=0;e<8;++e){var o=new Array;n.grid.push(o);for(var c=0;c<8;++c){var u=new a;u.coord=new i(c,e),o.push(u)}}},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/NumberRolling.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t.Component}],execute:function(){e._RF.push({},"29502SFN3pFfaeaQMp22yGi","NumberRolling",void 0);t("NumberRolling",function(){function t(){}return t.exe=function(t,n,e,i){var o=null;null==(o=t.getComponent(u))&&(o=t.addComponent(u)),o.enabled=!0,o.label=t,o.num1=e,o.num2=i,o.setValue=this.setVal,o.duration=n,o.onComplete=function(){o.enabled=!1},o.init()},t.setVal=function(t){return t.toString()},t}());var u=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),u=0;u<e;u++)i[u]=arguments[u];return(n=t.call.apply(t,[this].concat(i))||this).label=null,n.num1=0,n.num2=0,n.duration=0,n.onComplete=null,n.setValue=null,n.diff=0,n.timeCount=0,n}n(e,t);var i=e.prototype;return i.init=function(){this.diff=this.num2-this.num1,this.timeCount=0,this.update(0)},i.update=function(t){this.timeCount+=t;var n=this.timeCount/this.duration;if(n>=1)return this.showNumber(this.num2),this.enabled=!1,void(null!=this.onComplete&&this.onComplete());var e=this.diff*n;e=this.num1+e,e=Math.floor(e),this.showNumber(e)},i.showNumber=function(t){this.label.string=this.setValue(t)},e}(i);e._RF.pop()}}}));

System.register("chunks:///_virtual/Place.ts",["cc","./Map.ts","./Player.ts","./Tray.ts","./Sound2.ts"],(function(n){var t,e,l,o,r,s,c;return{setters:[function(n){t=n.cclegacy,e=n.UITransform,l=n.Vec3},function(n){o=n.Map},function(n){r=n.Player},function(n){s=n.Tray},function(n){c=n.Sound}],execute:function(){t._RF.push({},"a8448//DNhO6Y0Yo/BiPfAY","Place",void 0);n("Place",function(){function n(){}return n.exe=function(n,t){for(var e=n.blocks,l=0;l<e.length;++l){var i=e[l],a=t[l];i.presentation.root.setParent(o.ins.presentation.root,!1),i.presentation.root.position=a.pos,a.block=i}n.root.destroy();var u=s.ins.shapes.indexOf(n);s.ins.shapes[u]=null;var p=r.ins.cellsLast;p.splice(0,p.length);for(var h=0;h<e.length;++h)p.push(t[h]);c.playPutdown()},n}());n("ShapePlaceTest",function(){function n(){}return n.getMatchMapCells=function(n){null==this.cells&&(this.cells=new Array),this.cells.splice(0,this.cells.length);var t=n.blocks[0],r=t.presentation.root.getComponent(e).convertToWorldSpaceAR(l.ZERO);r=o.ins.presentation.root.getComponent(e).convertToNodeSpaceAR(r);var s=this.hitCellEmpty(r);if(null==s)return null;this.cells.push(s);for(var c=1;c<n.blocks.length;++c){var i=n.blocks[c].coord.clone().subtract(t.coord);i.add(s.coord);var a=o.ins.getCell(i);if(null==a||null!=a.block)return null;this.cells.push(a)}return this.cells},n.hitCellEmpty=function(n){for(var t=null,e=Number.MAX_VALUE,l=0;l<o.ins.grid.length;++l)for(var r=o.ins.grid[l],s=0;s<r.length;++s){var c=r[s],i=n.clone().subtract(c.pos).lengthSqr();i<3600&&i<e&&(t=c,e=i)}return null==t||null!=t.block?null:t},n}()).cells=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["cc"],(function(e){var t,s;return{setters:[function(e){t=e.cclegacy,s=e.sys}],execute:function(){t._RF.push({},"7eb45MJ4ZhC9pWhwJN4dhOV","Player",void 0);var r=e("Player",(function(){this.score=0,this.scoreBest=0,this.cellsLast=new Array}));r.ins=null;e("PlayerPersist",function(){function e(){}return e.saveScoreBest=function(){s.localStorage.setItem("ScoreBest",r.ins.scoreBest.toString())},e.loadScoreBest=function(){var e=s.localStorage.getItem("ScoreBest");null!=e&&(r.ins.scoreBest=Number(e))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Random.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"ddbbcAFyqVH0rrtlvc2epag","Random",void 0);n("Random",function(){function n(){}return n.rangeInt=function(n,t){return Math.floor(Math.random()*(t+1-n))+n},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ResMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,a,n,l;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,a=e.resources,n=e.Prefab,l=e.instantiate}],execute:function(){i._RF.push({},"16f6a74wnxGsboYqTVb80Qv","ResMgr",void 0);var o=e("ResMgr",(function(){this.block=new Map,this.mapBg=void 0,this.mapCellBg=void 0,this.mapCellHint=void 0,this.ui=void 0,this.effect=void 0,this.audio=void 0,this.guide=void 0}));o.ins=null;e("ResMgrInit",function(){function e(){}return e.exe=function(e){o.ins=new o;var i=o.ins;a.load("Prefab",n,(function(a,n){var o=l(n);i.mapBg=o.getChildByPath("Map/MapBg"),i.mapCellBg=o.getChildByPath("Map/MapCellBg");for(var r,s=t(o.getChildByPath("Block").children);!(r=s()).done;){var u=r.value;i.block.set(u.name,u)}i.mapCellHint=o.getChildByPath("Map/MapCellHint"),i.ui=o.getChildByPath("Ui"),i.effect=o.getChildByPath("Effect"),i.audio=o.getChildByPath("Audio"),i.guide=o.getChildByPath("Guide"),e()}))},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Scoring.ts",["cc","./NumberRolling.ts","./UiMain.ts","./Player.ts"],(function(e){var n,o,r,c,t;return{setters:[function(e){n=e.cclegacy},function(e){o=e.NumberRolling},function(e){r=e.UiMain},function(e){c=e.PlayerPersist,t=e.Player}],execute:function(){n._RF.push({},"cf23bwWvwBIsYYQNByXJveJ","Scoring",void 0);e("Scoring",function(){function e(){}return e.add=function(e){var n=t.ins,i=n.score,s=i+e;n.score=s,o.exe(r.ins.score,.2,i,s),n.score>n.scoreBest&&(o.exe(r.ins.scoreBest,.2,n.scoreBest,n.score),n.scoreBest=n.score,c.saveScoreBest())},e}()),e("ScoringRule",function(){function e(){}return e.getScoreEliminateNonCombo=function(e){return 1==e?10:2==e?20:3==e?60:4==e?120:5==e?200:6==e?300:400},e.getScoreEliminateCombo=function(e,n){return 10*(e+n+1)*n},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Shake.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,u,r;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,u=e.tween,r=e.Vec3}],execute:function(){t._RF.push({},"dd401Bq5UlPaJhJttDOC+7v","Shake",void 0);e("Shake",function(){function e(){}return e.exePreset=function(e,t,u){void 0===u&&(u=1);for(var r,s=this.genData(t),o=n(s);!(r=o()).done;){var a=r.value[0];a.multiply3f(u,u,u),a.add(e.position)}this.exe(e,s)},e.exe=function(e,n){for(var t=u(e),r=0;r<n.length;++r){var s=n[r],o=s[0],a=s[1],h=u(e).to(a,{position:o});t.then(h)}t.start()},e.genData=function(e){var n=null;return"1"==e?((n=new Array).push([new r(10,-10),.1]),n.push([new r(0,0),.05])):"2"==e?((n=new Array).push([new r(6,10),.1]),n.push([new r(10,-7),.1]),n.push([new r(-5,-4),.05]),n.push([new r(5,5),.05]),n.push([new r(0,0),.05])):"3"==e&&((n=new Array).push([new r(10,1),.05]),n.push([new r(-9,-7),.1]),n.push([new r(13,5),.05]),n.push([new r(2,-7),.05]),n.push([new r(9,-1),.05]),n.push([new r(5,1),.05]),n.push([new r(0,0),.05])),n},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Shape.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Block.ts","./CfgShape.ts"],(function(e){var o,t,r,n,i,a,c,h;return{setters:[function(e){o=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,r=e.Node,n=e.Size,i=e.Vec3,a=e.Vec2},function(e){c=e.BlockFactory},function(e){h=e.CfgShape}],execute:function(){t._RF.push({},"72eb5DaZ15E1pmJii90QD8V","Shape",void 0);var s=e("Shape",(function(){this.id=void 0,this.blocks=new Array,this.root=void 0})),u=(e("ShapeFactory",function(){function e(){}return e.create=function(e,t){var n=new s;n.root=new r;for(var i,a=h.data.get(e).shape,d=u.exe(a),p=o(d);!(i=p()).done;){var f=i.value,l=c.create(t);n.blocks.push(l),l.coord=f,l.presentation.root.setParent(n.root,!1)}return this.presentation(n),n},e.presentation=function(e){for(var t,r=new n(0,0),a=o(e.blocks);!(t=a()).done;){var c=t.value;c.presentation.root.position=new i(80*c.coord.x,80*c.coord.y),r.width<c.coord.x&&(r.width=c.coord.x),r.height<c.coord.y&&(r.height=c.coord.y)}r.width=80*r.width/2,r.height=80*r.height/2;for(var h,s=o(e.blocks);!(h=s()).done;){h.value.presentation.root.position.add(new i(-r.width,-r.height))}},e}()),function(){function e(){}return e.exe=function(e){for(var o=new Array,t=e.split("\n"),r=0;r<t.length;++r)for(var n=t[r],i=0;i<n.length;++i)if("0"!=n.charAt(i)){var c=new a(i,t.length-r-1);o.push(c)}return o},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Sound.ts",["cc"],(function(t){var n,e,o,u,i,l;return{setters:[function(t){n=t.cclegacy,e=t.resources,o=t.AudioClip,u=t.Node,i=t.AudioSource,l=t.tween}],execute:function(){n._RF.push({},"1ab40V16RxOaJGF6kQxM05z","Sound",void 0);t("Sound",function(){function t(){this.data=null,this.m_enabled=!0,this.set=new Set}var n=t.prototype;return n.setEnabled=function(t){this.m_enabled=t,0==t&&this.stopAll()},n.getEnabled=function(){return this.m_enabled},n.play=function(t){0!=this.m_enabled&&e.load(t,o,(function(t,n){var e=new u,o=e.getComponent(i);null==o&&(o=e.addComponent(i)),o.clip=n,o.loop=!1,o.play(),l(e).delay(o.duration).start()}))},n.stopAll=function(){},n.getItem=function(t){return null==this.data?null:this.data[t]},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Sound2.ts",["cc","./ResMgr.ts","./UiMain.ts"],(function(t){var n,i,e,a,o,l,u;return{setters:[function(t){n=t.cclegacy,i=t.instantiate,e=t.AudioSource,a=t.tween,o=t.sys},function(t){l=t.ResMgr},function(t){u=t.UiMain}],execute:function(){n._RF.push({},"9fa42k/To5JD4P5NJ3tTu+y","Sound",void 0);var c=t("Sound",function(){function t(){}return t.playPickup=function(){this.play("PickUp")},t.playPutdown=function(){this.play("PutDown")},t.gameStart=function(){this.play("GameStart")},t.lose=function(){this.play("Lose")},t.elimNormal=function(){this.play("ElimNormal")},t.evaluation=function(t){var n=null;if(2==t)n="Good";else if(3==t)n="Great";else if(4==t)n="Excellect";else if(5==t)n="Amazing";else{if(6!=t)return;n="Unbelievable"}this.play(n)},t.combo=function(t){t>10&&(t=10);var n="Combo"+t.toString();this.play(n)},t.di=function(){this.play("Di")},t.appear=function(){this.play("Appear")},t.btnClick=function(){this.play("btnClick")},t.play=function(t){if(0!=this.enabled){var n=l.ins.audio.getChildByPath(t);if(null!=n){var o=i(n);o.active=!0,o.setParent(u.ins.root);var c=o.getComponent(e);c.play(),a(o).delay(c.duration).call((function(){o.destroy()})).start()}}},t}());c.enabled=!0;t("AudioSettingsPersist",function(){function t(){}return t.load=function(){var t=o.localStorage.getItem("AudioSoundEnabled");null!=t&&""!=t&&(c.enabled="1"==t)},t.save=function(){o.localStorage.setItem("AudioSoundEnabled",1==c.enabled?"1":"0")},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Test.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,r,u,c;return{setters:[function(n){t=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){r=n.cclegacy,u=n.find,c=n.resources}],execute:function(){r._RF.push({},"7588bSiRFtJWJRb/M3+jeVd","Test",void 0);n("Test",function(){function n(){}return n.exe=function(){var n=t(e().mark((function n(){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u("Canvas");case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),n.loadAsync=function(){var n=t(e().mark((function n(t){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadAsync2(t);case 2:n.sent;case 4:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),n.loadAsync2=function(){var n=t(e().mark((function n(t){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,e){c.load(t,(function(t,e){n(e)}))})));case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Tray.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Shape.ts","./CfgShape.ts","./WeightProbability.ts","./TriggerAnim.ts"],(function(t){var i,e,n,r,s,o,a,h,p,u,l;return{setters:[function(t){i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,n=t.find,r=t.randomRangeInt,s=t.Vec3,o=t.tween},function(t){a=t.ShapeFactory},function(t){h=t.CfgShape},function(t){p=t.WeightProbability,u=t.WeightProbabilityItem},function(t){l=t.TriggerAnim}],execute:function(){e._RF.push({},"5b996QDOjdJCrEz4XEpqY/v","Tray",void 0),t("Tray",function(){function t(){this.root=void 0,this.shapes=new Array,this.genEnabled=!0,this.slots=new Array}var e=t.prototype;return e.init=function(){var t=n("Canvas/World/Tray");this.root=t;for(var e,r=i(this.root.children);!(e=r()).done;){var s=e.value,o=new c;this.slots.push(o),o.init(s),this.shapes.push(null)}f.init()},e.gen=function(){if(0!=this.isEmpty()&&0!=this.genEnabled)for(var t=0;t<this.shapes.length;++t){var i=f.weight(),e=r(1,7).toString();this.genShapeOne(i,e,t)}},e.genShapeOne=function(t,i,e){var n=a.create(t,i),r=this.root.children[e];return n.root.setParent(r,!1),n.root.scale=new s(.5,.5),this.shapes[e]=n,this.shapeAppear(n),this.slots[e].effectAppear.show(),n},e.shapeAppear=function(t){var i=t.root;i.scale=new s(0,0),o(i).to(.2,{scale:new s(.5,.5)}).start()},e.clear=function(){for(var t=0;t<this.shapes.length;++t){var i=this.shapes[t];null!=i&&(i.root.destroy(),this.shapes[t]=null)}},e.isEmpty=function(){for(var t=0;t<this.shapes.length;++t)if(null!=this.shapes[t])return!1;return!0},t}()).ins=void 0;var c=function(){function t(){this.shape=void 0,this.root=void 0,this.effectAppear=new l}return t.prototype.init=function(t){this.root=t,this.effectAppear.init(this.root.getChildByPath("ShapeAppearEffect"))},t}(),f=function(){function t(){}return t.init=function(){this.wp=new p,this.list=new Array;for(var t,e=new Array,n=i(h.data.values());!(t=n()).done;){var r=t.value;this.list.push(r.id);var s=new u;s.name=r.id,s.probability=r.probabilityWeight,e.push(s)}this.wp.init(e)},t.average=function(){var t=r(0,this.list.length).toString();return this.list[t]},t.weight=function(){return this.wp.get()},t}();f.list=void 0,f.wp=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/TriggerAnim.ts",["cc"],(function(t){var i,n,o;return{setters:[function(t){i=t.cclegacy,n=t.Animation,o=t.AnimationComponent}],execute:function(){i._RF.push({},"824b4MFs9tInafp4QMibv7G","TriggerAnim",void 0);t("TriggerAnim",function(){function t(){this.root=void 0,this.anim=void 0}var i=t.prototype;return i.init=function(t){var i=this;this.root=t,this.root.active=!1,this.anim=this.root.getComponent(n),this.anim.on(o.EventType.FINISHED,(function(){i.root.active=!0}))},i.show=function(){this.root.active=!0,this.anim.play()},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiComboIndicator.ts",["cc","./TriggerAnim.ts"],(function(t){var i,n;return{setters:[function(t){i=t.cclegacy},function(t){n=t.TriggerAnim}],execute:function(){i._RF.push({},"59babj7zURNZqlULsaUMdGz","UiComboIndicator",void 0);t("UiComboIndicator",function(){function t(){this.root=void 0,this.main=void 0,this.enterAnim=new n}var i=t.prototype;return i.init=function(t){this.root=t,this.root.active=!0,this.main=this.root.getChildByPath("Main"),this.main.active=!1,this.enterAnim.init(this.root.getChildByPath("Enter"))},i.enter=function(){this.main.active=!0},i.reset=function(){this.main.active=!1},i.combo=function(){this.enterAnim.show()},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiEffect.ts",["cc"],(function(t){var n,e,c,o;return{setters:[function(t){n=t.cclegacy,e=t.Vec3,c=t.tween,o=t.UIOpacity}],execute:function(){n._RF.push({},"ca63fiP02VMpIW0ra4L+A+p","UiEffect",void 0);t("UiEffectFade",function(){function t(){this.node=null}var n=t.prototype;return n.init=function(t){this.node=t},n.fadeIn=function(){},n.fadeOut=function(){},t}()),t("UiEffectPopup",function(){function t(){}return t.show=function(t){t.active=!0,t.scale=new e(.6,.6),c(t).to(.2,{scale:new e(1.1,1.1,1.1)}).to(.1,{scale:new e(1,1,1)}).start();var n=t.getComponent(o);null==n&&(n=t.addComponent(o)),n.opacity=0,c(n).to(.3,{opacity:255}).start()},t.hide=function(t){c(t).to(.2,{scale:new e(1.1,1.1,1.1)}).to(.1,{scale:new e(.6,.6,.6)}).start();var n=t.getComponent(o);null==n&&(n=t.addComponent(o)),c(n).to(.3,{opacity:0}).call((function(){n.opacity=255,t.active=!1})).start()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UiLose.ts",["cc","./ResMgr.ts","./UiMain.ts"],(function(t){var i,n,e,o,s;return{setters:[function(t){i=t.cclegacy,n=t.instantiate,e=t.Vec3},function(t){o=t.ResMgr},function(t){s=t.UiMain}],execute:function(){i._RF.push({},"a1de4/vVi9O0ZVBvoaKUKik","UiLose",void 0);t("UiLose",function(){function t(){this.root=null}return t.create=function(){var i=new t,r=o.ins.ui.getChildByPath("Lose"),c=n(r),u=s.ins.root;return c.setParent(u,!1),c.position=e.ZERO,i.init(c),i},t.prototype.init=function(t){this.root=t},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiMain.ts",["cc","./Player.ts","./UiSettings.ts","./UiComboIndicator.ts","./Sound2.ts","./TriggerAnim.ts"],(function(t){var i,n,o,s,e,c,r,h,a;return{setters:[function(t){i=t.cclegacy,n=t.find,o=t.Label,s=t.Node},function(t){e=t.Player},function(t){c=t.UiSettings},function(t){r=t.UiComboIndicator},function(t){h=t.Sound},function(t){a=t.TriggerAnim}],execute:function(){i._RF.push({},"e0df5QGV2RDg7TRYpJPNphe","UiMain",void 0),t("UiMain",function(){function t(){this.root=void 0,this.score=null,this.scoreBest=null,this.comboIndicator=new r,this.btnSettings=void 0,this.clickAnim=new a}return t.prototype.init=function(){this.root=n("Canvas/Ui"),this.score=this.root.getChildByPath("Score/val").getComponent(o),this.score.string="0",this.scoreBest=this.root.getChildByPath("ScoreBest/val").getComponent(o),this.scoreBest.string="0",this.scoreBest.string=e.ins.scoreBest.toString(),this.comboIndicator.init(this.root.getChildByPath("ComboIndicator")),this.btnSettings=this.root.getChildByPath("btnSettings"),this.btnSettings.on(s.EventType.TOUCH_END,(function(){h.btnClick();c.create()})),this.clickAnim.init(this.root.getChildByPath("ClickAnim"))},t}()).ins=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiSettings.ts",["cc","./ResMgr.ts","./UiMain.ts","./GameStart.ts","./Sound2.ts"],(function(t){var i,n,o,e,s,r,h,c,a,u,f;return{setters:[function(t){i=t.cclegacy,n=t.Input,o=t.UITransform,e=t.Node,s=t.instantiate,r=t.Vec3},function(t){h=t.ResMgr},function(t){c=t.UiMain},function(t){a=t.GameStart},function(t){u=t.Sound,f=t.AudioSettingsPersist}],execute:function(){i._RF.push({},"34547VKQbZAQYjNWvH1RGTl","UiSettings",void 0);t("UiSettings",function(){function t(){this.root=null}t.create=function(){var i=new t,n=h.ins.ui.getChildByPath("Settings"),o=s(n),e=c.ins.root;return o.setParent(e,!1),o.position=r.ZERO,i.init(o),i};var i=t.prototype;return i.init=function(t){var i=this;this.root=t,this.root.getChildByPath("btnClose").on(n.EventType.TOUCH_END,(function(){u.btnClick(),i.root.destroy()}));var s=this.root.getChildByPath("mask");s.getComponent(o).setContentSize(2e3,2e3),s.on(n.EventType.TOUCH_END,(function(){u.btnClick(),i.root.destroy()})),this.root.getChildByPath("Btns/btnNewGame").on(e.EventType.TOUCH_END,this.onClick_NewGame.bind(this)),(new d).init(this.root.getChildByPath("Btns/Sound/Switch"))},i.onClick_NewGame=function(){u.btnClick(),this.root.destroy(),a.exe()},t}());var d=t("UiSettingSound",function(){function t(){this.root=void 0,this.on=void 0,this.off=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.on=this.root.getChildByPath("On"),this.off=this.root.getChildByPath("Off"),this.root.on(n.EventType.TOUCH_END,this.onClick,this),this.refresh()},i.onClick=function(){u.enabled=!u.enabled,this.refresh(),f.save(),u.btnClick()},i.refresh=function(){this.on.active=!1,this.off.active=!1,this.on.active=u.enabled,this.off.active=!this.on.active},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiSettle.ts",["cc","./ResMgr.ts","./UiMain.ts","./Player.ts","./NumberRolling.ts","./Sound2.ts","./GameStart.ts"],(function(t){var n,e,i,o,s,r,c,a,u,h,l,d,f;return{setters:[function(t){n=t.cclegacy,e=t.Label,i=t.Input,o=t.UIOpacity,s=t.tween,r=t.Vec3,c=t.instantiate},function(t){a=t.ResMgr},function(t){u=t.UiMain},function(t){h=t.Player},function(t){l=t.NumberRolling},function(t){d=t.Sound},function(t){f=t.GameStart}],execute:function(){n._RF.push({},"6d465IGGspJdrlQm2BQMqZd","UiSettle",void 0);t("UiSettle",function(){function t(){this.root=null,this.score=void 0,this.scoreBest=void 0,this.btnContinue=void 0}t.create=function(){var n=new t,e=a.ins.ui.getChildByPath("Settle"),i=c(e),o=u.ins.root;return i.setParent(o,!1),i.position=r.ZERO,n.init(i),n};var n=t.prototype;return n.init=function(t){this.root=t,this.score=this.root.getChildByPath("Score/val").getComponent(e),this.score.string="0",this.scoreBest=this.root.getChildByPath("ScoreBest/val").getComponent(e),this.scoreBest.string="0",this.btnContinue=this.root.getChildByPath("btnContinue"),this.btnContinue.on(i.EventType.TOUCH_END,this.onClickContinue.bind(this)),this.show()},n.show=function(){var t=this,n=h.ins;l.exe(this.score,1,0,n.score),this.scoreBest.string=n.scoreBest.toString();var e=this.btnContinue.getComponent(o);e.opacity=0,s(this).delay(1).call((function(){d.appear(),s(e).to(.5,{opacity:255}).start(),s(t.score.node).sequence(s(t.score.node).to(.2,{scale:new r(1.2,1.2)}),s(t.score.node).to(.2,{scale:new r(1,1)})).start()})).start();for(var i=s(this),c=0;c<=1;c+=.07)i.call((function(){d.di()})),i.delay(.07);i.start()},n.onClickContinue=function(){d.btnClick(),this.root.destroy(),f.exe()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UiTouch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tray.ts","./Eliminate.ts","./Judge.ts","./Place.ts","./MapCellHint.ts","./EliminateHint.ts","./UiMain.ts","./Sound2.ts","./Lose.ts","./Scoring.ts","./Combo.ts"],(function(t){var o,n,e,i,s,a,h,c,r,u,l,p,f,d,T,v,g,m,C,E;return{setters:[function(t){o=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,e=t.find,i=t.Input,s=t.Vec3,a=t.UITransform,h=t.Tween,c=t.tween},function(t){r=t.Tray},function(t){u=t.Eliminate},function(t){l=t.Judage},function(t){p=t.ShapePlaceTest,f=t.Place},function(t){d=t.MapCellHint},function(t){T=t.EliminateHint},function(t){v=t.UiMain},function(t){g=t.Sound},function(t){m=t.Lose},function(t){C=t.Scoring},function(t){E=t.ComboJudge}],execute:function(){n._RF.push({},"738ad7VAPROVa4Uur6FdcmN","UiTouch",void 0),t("UiTouch",function(){function t(){this.root=void 0,this.allowPlace=null,this.state=0,this.touchId=null,this.shape=null}var n=t.prototype;return n.init=function(){this.root=e("Canvas/Ui/Touch"),this.root.on(i.EventType.TOUCH_START,this.onTouchStart,this),this.root.on(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.root.on(i.EventType.TOUCH_END,this.onTouchEnd,this),this.root.on(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},n.onTouchStart=function(t){var n=t.getUILocation(),e=new s(n.x,n.y);if(v.ins.clickAnim.show(),v.ins.clickAnim.root.position=v.ins.clickAnim.root.parent.getComponent(a).convertToNodeSpaceAR(e),null==this.touchId){var i=null;e=r.ins.root.getComponent(a).convertToNodeSpaceAR(e);for(var c,u=o(r.ins.shapes);!(c=u()).done;){var l=c.value;if(null!=l)if(l.root.parent.position.clone().subtract(e).lengthSqr()<14400){i=l;break}}null!=i&&(g.playPickup(),this.shape=i,h.stopAllByTarget(this.shape.root),this.shape.root.scale=new s(1,1),this.setShapePos(n),this.touchId=t.getID())}},n.onTouchMove=function(t){if(this.touchId==t.getID()){this.setShapePos(t.getUILocation());var o=p.getMatchMapCells(this.shape);if(null==o)return d.ins.hide(),void T.ins.reset();T.ins.exe(o),d.ins.show(o)}},n.onTouchEnd=function(t){if(this.touchId==t.getID()){this.touchId=null,d.ins.hide();var o=p.getMatchMapCells(this.shape);if(null==o||null!=this.allowPlace&&0==this.allowPlace(o))return c(this.shape.root).to(.2,{position:s.ZERO}).start(),void c(this.shape.root).to(.2,{scale:new s(.5,.5)}).start();f.exe(this.shape,o),C.add(this.shape.blocks.length),r.ins.gen(),0==u.exe()&&E.ins.exeMoveNoEliminate()&&v.ins.comboIndicator.reset(),1==l.isLose()&&m.exe()}},n.setShapePos=function(t){var o=new s(t.x,t.y);(o=this.shape.root.parent.getComponent(a).convertToNodeSpaceAR(o)).y+=200,this.shape.root.position=o},t}()).ins=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/WeightProbability.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"6eb6ddHrVZHsYivtr6Toae5","WeightProbability",void 0);t("WeightProbabilityItem",(function(){this.name=void 0,this.probability=void 0})),t("WeightProbability",function(){function t(){this.weightCount=0,this.data=new Array}var i=t.prototype;return i.init=function(t){this.weightCount=0,this.data.splice(0,this.data.length);for(var i=0;i<t.length;++i){var n=t[i],a={};a.min=this.weightCount,a.max=this.weightCount+n.probability,a.item=n,this.data.push(a),this.weightCount+=n.probability}},i.get=function(){for(var i=null,n=t.rangeInt(0,this.weightCount-1),a=0;a<this.data.length;++a){var e=this.data[a];e.min<=n&&n<e.max&&(i=e.item.name)}return i},i.clear=function(){this.data.splice(0,this.data.length)},t.rangeInt=function(t,i){return Math.floor(Math.random()*(i+1-t))+t},t}());i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});